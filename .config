# =====================
# RK3128 TP-9038 打印机服务器 - 优化配置
# =====================

# 目标系统
CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_rk3128=y
CONFIG_TARGET_rockchip_rk3128_DEVICE_tlink_r1=y

# 镜像配置
CONFIG_TARGET_ROOTFS_PARTSIZE=64
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_GRUB_IMAGES=n
CONFIG_GRUB_TIMEOUT=0

# 内核配置
CONFIG_KERNEL_BUILD_USER="RK3128"
CONFIG_KERNEL_BUILD_DOMAIN="github.com"
CONFIG_KERNEL_CFLAGS="-O2 -pipe -mtune=cortex-a7"
CONFIG_KERNEL_DEBUG_INFO=n
CONFIG_KERNEL_DEBUG_KERNEL=n
CONFIG_DEBUG_INFO=n
CONFIG_DEBUG_KERNEL=n

# 基础包 - 最小化
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_fdisk=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_blkid=y
CONFIG_PACKAGE_usbutils=y

# 网络配置
CONFIG_PACKAGE_dnsmasq=y
CONFIG_PACKAGE_iptables=y
CONFIG_PACKAGE_iptables-mod-conntrack-extra=y
CONFIG_PACKAGE_iptables-mod-ipopt=y

# USB 支持
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-printer=y

# 网络驱动
CONFIG_PACKAGE_kmod-r8169=y
CONFIG_PACKAGE_kmod-mii=y

# 无线驱动
CONFIG_PACKAGE_kmod-rtl8xxxu=y
CONFIG_PACKAGE_kmod-rtl8192cu=y
CONFIG_PACKAGE_wpad-basic-wolfssl=y

# 打印机服务核心
CONFIG_PACKAGE_p910nd=y
CONFIG_PACKAGE_cups=y
CONFIG_PACKAGE_cups-filters=y
CONFIG_PACKAGE_cups-client=y

# CUPS 依赖
CONFIG_PACKAGE_ghostscript=y
CONFIG_PACKAGE_gsfonts=y
CONFIG_PACKAGE_foomatic-filters=y

# 库文件
CONFIG_PACKAGE_libcups=y
CONFIG_PACKAGE_libcupsimage=y
CONFIG_PACKAGE_libpng=y
CONFIG_PACKAGE_libtiff=y
CONFIG_PACKAGE_libjpeg=y
CONFIG_PACKAGE_zlib=y

# LuCI 界面 - 仅核心
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-app-cups=y
CONFIG_PACKAGE_luci-app-p910nd=y
CONFIG_PACKAGE_luci-theme-bootstrap=y

# 文件系统支持
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-vfat=y

# 基础工具
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_curl=y

# SSH 服务
CONFIG_PACKAGE_dropbear=y

# 时区
CONFIG_PACKAGE_zoneinfo-asia=y

# 优化和调试
CONFIG_CCACHE=y
CONFIG_BUILD_LOG=y
CONFIG_STRIP_KERNEL_EXPORTS=y

# 移除复杂和不必要的包
CONFIG_PACKAGE_firewall=n
CONFIG_PACKAGE_odhcpd=n
CONFIG_PACKAGE_ppp=n
CONFIG_PACKAGE_ppp-mod-pppoe=n
CONFIG_PACKAGE_odhcp6c=n
CONFIG_PACKAGE_6in4=n
CONFIG_PACKAGE_6rd=n
CONFIG_PACKAGE_6to4=n
CONFIG_PACKAGE_ddns-scripts=n
CONFIG_PACKAGE_qos-scripts=n
CONFIG_PACKAGE_sqm-scripts=n
CONFIG_PACKAGE_uhttpd=n
CONFIG_PACKAGE_uhttpd-mod-ubus=n
CONFIG_PACKAGE_libustream-mbedtls=n
CONFIG_PACKAGE_libustream-openssl=y
